(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a(48)},,,,,function(e,t,a){var n={"./01d.png":19,"./01n.png":20,"./02d.png":21,"./02n.png":22,"./03d.png":23,"./03n.png":24,"./04d.png":25,"./04n.png":26,"./09d.png":27,"./09n.png":28,"./10d.png":29,"./10n.png":30,"./11d.png":31,"./11n.png":32,"./13d.png":33,"./13n.png":34,"./50d.png":35,"./50n.png":36};function o(e){var t=c(e);return a(t)}function c(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}o.keys=function(){return Object.keys(n)},o.resolve=c,e.exports=o,o.id=18},function(e,t,a){e.exports=a.p+"static/media/01d.9d00f145.png"},function(e,t,a){e.exports=a.p+"static/media/01n.dd94790a.png"},function(e,t,a){e.exports=a.p+"static/media/02d.37caf64b.png"},function(e,t,a){e.exports=a.p+"static/media/02n.05980e3b.png"},function(e,t,a){e.exports=a.p+"static/media/03d.22cb40af.png"},function(e,t,a){e.exports=a.p+"static/media/03n.22cb40af.png"},function(e,t,a){e.exports=a.p+"static/media/04d.919edcce.png"},function(e,t,a){e.exports=a.p+"static/media/04n.919edcce.png"},function(e,t,a){e.exports=a.p+"static/media/09d.dc97dd1a.png"},function(e,t,a){e.exports=a.p+"static/media/09n.dc97dd1a.png"},function(e,t,a){e.exports=a.p+"static/media/10d.0cc09103.png"},function(e,t,a){e.exports=a.p+"static/media/10n.39b2af29.png"},function(e,t,a){e.exports=a.p+"static/media/11d.df145b5b.png"},function(e,t,a){e.exports=a.p+"static/media/11n.df145b5b.png"},function(e,t,a){e.exports=a.p+"static/media/13d.4e9732ea.png"},function(e,t,a){e.exports=a.p+"static/media/13n.4e9732ea.png"},function(e,t,a){e.exports=a.p+"static/media/50d.b8857f98.png"},function(e,t,a){e.exports=a.p+"static/media/50n.b8857f98.png"},,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(10),i=a.n(c),r=a(12),s=a(1),l=a(2),m=a(4),u=a(3),d=a(5),p=function(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200===n.status?t(n.response):a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})};var f=function(e){return o.a.createElement("div",{className:"location__last-calc"},o.a.createElement("p",null,"Last calculation: ",function(e){var t=new Date(1e3*e),a=t.getHours(),n="0"+t.getMinutes(),o="0"+t.getSeconds();return"".concat(a,":").concat(n.substr(-2),":").concat(o.substr(-2))}(e.unix)))},h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).convertToLocalTime=function(e){var t=new Date(1e3*e),a=t.getHours()-2,n="0"+t.getMinutes(),o="0"+t.getSeconds();return"".concat(a,":").concat(n.substr(-2),":").concat(o.substr(-2))},a.state={lat:e.lat,lon:e.lon},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"initClock",value:function(){var e=this,t=(new Date).getTime()/1e3;fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(this.state.lat,",").concat(this.state.lon,"&timestamp=").concat(t,"&key=").concat("AIzaSyCo861UJhT1kb6yVfSbAFTK5td8hlLy6vA")).then(function(e){return e.json()}).then(function(a){return e.setState({locationTimestamp:t+a.dstOffset+a.rawOffset})}),this.timestampTicker=setInterval(function(){e.setState(function(e){return{locationTimestamp:e.locationTimestamp+=1}})},1e3)}},{key:"componentDidMount",value:function(){this.initClock()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timestampTicker)}},{key:"render",value:function(){return o.a.createElement("div",{className:"location__local-time"},o.a.createElement("p",null,"Local time: ",this.convertToLocalTime(this.state.locationTimestamp)))}}]),t}(n.Component),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getCurrentWeather=function(t){p("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&APPID=").concat("4e262f77fbfc100ee6fca720cc13e5e5","&units=metric")).then(function(t){var a=JSON.parse(t);e.setState({isLoaded:!0,imageCode:a.weather[0].icon,temp:Math.round(a.main.temp),lastCalc:a.dt,lon:a.coord.lon,lat:a.coord.lat})},function(t){e.setState({isLoaded:!0,error:t})})},e.handleReloadLocation=function(t){e.getCurrentWeather(e.props.cityName)},e.handleRemoveLocation=function(){e.props.removeLocation(e.props.id)},e.state={error:null,isLoaded:!1,imageCode:"01d"},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentWeather(this.props.cityName)}},{key:"render",value:function(){return this.state.isLoaded?this.state.error?o.a.createElement("div",{className:"location"},o.a.createElement("i",{className:"fas fa-times-circle remove-location",onClick:this.handleRemoveLocation,alt:"Remove location"}),o.a.createElement("div",{className:"location__container"},o.a.createElement("div",{className:"location__error"},o.a.createElement("h2",null,this.props.cityName),o.a.createElement("p",null,"Can not find current weather data")))):this.state.error?void 0:o.a.createElement("div",{className:"location"},o.a.createElement("i",{className:"fas fa-times-circle remove-location",onClick:this.handleRemoveLocation,alt:"Remove location"}),o.a.createElement("i",{className:"fas fa-sync-alt reload-location",onClick:this.handleReloadLocation,alt:"Reload location"}),o.a.createElement("div",{className:"location__container"},o.a.createElement("div",{className:"location__loaded"},o.a.createElement("h2",null,this.props.cityName),o.a.createElement("div",{className:"location__weather"},o.a.createElement("div",{className:"temp"},o.a.createElement("p",null,this.state.temp,o.a.createElement("span",null,"\xb0C"))),o.a.createElement("div",{className:"icon"},o.a.createElement("img",{src:a(18)("./".concat(this.state.imageCode,".png")),alt:""}))),o.a.createElement(h,{lat:this.state.lat,lon:this.state.lon}),o.a.createElement(f,{unix:this.state.lastCalc})))):o.a.createElement("div",{className:"location"},o.a.createElement("i",{className:"fas fa-times-circle remove-location",alt:"Remove location"}),o.a.createElement("div",{className:"location__container"},o.a.createElement("div",{className:"location__loading"},o.a.createElement("i",{className:"fas fa-spinner fa-spin"}))))}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={cityName:""},a.handleFormSubmit=function(e){e.preventDefault(),a.props.addLocation(a.state.cityName),a.props.hideNewLocation()},a.handleValueChangeCityName=function(e){a.setState({cityName:e.target.value})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"new-location"},o.a.createElement("i",{className:"fas fa-times-circle remove-location",alt:"Remove location",onClick:this.props.hideNewLocation}),o.a.createElement("div",{className:"new-location__container"},o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("input",{onChange:this.handleValueChangeCityName,placeholder:"Enter City Name"}),o.a.createElement("button",{type:"submit"},"submit"))))}}]),t}(n.Component),b=function(e){return o.a.createElement("div",{className:"addLocation",onClick:e.showNewLocation},o.a.createElement("i",{className:"fas fa-plus-circle"}))},N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showNewLocation:!1},a.handleShowNewLocation=function(){a.setState({showNewLocation:!0})},a.handleHideNewLocation=function(){a.setState({showNewLocation:!1})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this;return this.state.showNewLocation&&(e=o.a.createElement(g,{hideNewLocation:this.handleHideNewLocation,addLocation:this.props.addLocation})),o.a.createElement("div",{className:"results"},this.props.locations.map(function(e){return o.a.createElement(v,{key:e.id,id:e.id,cityName:e.name,removeLocation:t.props.removeLocation})}),e,o.a.createElement(b,{showNewLocation:this.handleShowNewLocation}))}}]),t}(n.Component),E=a(6),w=a.n(E),L=a(11),y=a.n(L),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={locations:[]},a.handleAddLocation=function(e){for(var t=function(){var t=y.a.generate();if(0===w.a.get("locations").filter(function(e){return e.id===t}).length)return w.a.set("locations",[].concat(Object(r.a)(w.a.get("locations")),[{name:e,id:t}])),a.setState({locations:w.a.get("locations")}),"break"};;){if("break"===t())break}},a.handleRemoveLocation=function(e){w.a.set("locations",w.a.get("locations").filter(function(t){return t.id!==e})),a.setState(function(t){return{locations:t.locations.filter(function(t){return t.id!==e})}})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"loadLocations",value:function(){w.a.get("locations")?this.setState({locations:w.a.get("locations")}):w.a.set("locations",[])}},{key:"componentDidMount",value:function(){this.loadLocations()}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"background-image"}),o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"Current weather in"),o.a.createElement(N,{locations:this.state.locations,removeLocation:this.handleRemoveLocation,addLocation:this.handleAddLocation})))}}]),t}(n.Component);a(47);i.a.render(o.a.createElement(O,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.3e0f1dd8.chunk.js.map